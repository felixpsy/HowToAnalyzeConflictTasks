<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data Preparation II | A Beginners Guide on How to Analyse Conflict Tasks</title>
  <meta name="description" content="Chapter 3 Data Preparation II | A Beginners Guide on How to Analyse Conflict Tasks" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data Preparation II | A Beginners Guide on How to Analyse Conflict Tasks" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data Preparation II | A Beginners Guide on How to Analyse Conflict Tasks" />
  
  
  

<meta name="author" content="Felix Cramer" />


<meta name="date" content="2025-06-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-preparation-i.html"/>
<link rel="next" href="analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#previous-experience-in-r"><i class="fa fa-check"></i>Previous Experience in R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#coding-style"><i class="fa fa-check"></i>Coding Style</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#content-overview"><i class="fa fa-check"></i>Content Overview</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="import-data.html"><a href="import-data.html"><i class="fa fa-check"></i><b>1</b> Import Data</a>
<ul>
<li class="chapter" data-level="1.1" data-path="import-data.html"><a href="import-data.html#set-directory-to-file-path"><i class="fa fa-check"></i><b>1.1</b> Set directory to file path</a></li>
<li class="chapter" data-level="1.2" data-path="import-data.html"><a href="import-data.html#import-files"><i class="fa fa-check"></i><b>1.2</b> Import files</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="import-data.html"><a href="import-data.html#import-csv-files"><i class="fa fa-check"></i><b>1.2.1</b> Import csv files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-preparation-i.html"><a href="data-preparation-i.html"><i class="fa fa-check"></i><b>2</b> Data Preparation I</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-preparation-i.html"><a href="data-preparation-i.html#select-relevant-variables"><i class="fa fa-check"></i><b>2.1</b> Select Relevant Variables</a></li>
<li class="chapter" data-level="2.2" data-path="data-preparation-i.html"><a href="data-preparation-i.html#create-new-variables"><i class="fa fa-check"></i><b>2.2</b> Create New Variables</a></li>
<li class="chapter" data-level="2.3" data-path="data-preparation-i.html"><a href="data-preparation-i.html#factorize-variables"><i class="fa fa-check"></i><b>2.3</b> Factorize variables</a></li>
<li class="chapter" data-level="2.4" data-path="data-preparation-i.html"><a href="data-preparation-i.html#tidyverse"><i class="fa fa-check"></i><b>2.4</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-preparation-ii.html"><a href="data-preparation-ii.html"><i class="fa fa-check"></i><b>3</b> Data Preparation II</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-preparation-ii.html"><a href="data-preparation-ii.html#exclusion-of-participants"><i class="fa fa-check"></i><b>3.1</b> Exclusion of participants</a></li>
<li class="chapter" data-level="3.2" data-path="data-preparation-ii.html"><a href="data-preparation-ii.html#exclusion-of-trials"><i class="fa fa-check"></i><b>3.2</b> Exclusion of trials</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-preparation-ii.html"><a href="data-preparation-ii.html#exclusion-of-outliers"><i class="fa fa-check"></i><b>3.2.1</b> Exclusion of outliers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>4</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="analysis.html"><a href="analysis.html#t-test"><i class="fa fa-check"></i><b>4.1</b> t-test</a></li>
<li class="chapter" data-level="4.2" data-path="analysis.html"><a href="analysis.html#anova"><i class="fa fa-check"></i><b>4.2</b> ANOVA</a></li>
<li class="chapter" data-level="4.3" data-path="analysis.html"><a href="analysis.html#lmms-glmms"><i class="fa fa-check"></i><b>4.3</b> LMMs/ GLMMs</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="analysis.html"><a href="analysis.html#building-models-adding-random-effects"><i class="fa fa-check"></i><b>4.3.1</b> Building models: Adding random effects</a></li>
<li class="chapter" data-level="4.3.2" data-path="analysis.html"><a href="analysis.html#testing-models-testmod"><i class="fa fa-check"></i><b>4.3.2</b> Testing models {testmod}</a></li>
<li class="chapter" data-level="4.3.3" data-path="analysis.html"><a href="analysis.html#convergence-issues-and-pragmatic-approaches"><i class="fa fa-check"></i><b>4.3.3</b> convergence issues and pragmatic approaches</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="analysis.html"><a href="analysis.html#bayesian-hypothesis-testing"><i class="fa fa-check"></i><b>4.4</b> Bayesian hypothesis testing</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="analysis.html"><a href="analysis.html#bayes-factors-for-classical-tests"><i class="fa fa-check"></i><b>4.4.1</b> Bayes factors for classical tests</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="analysis.html"><a href="analysis.html#bayesian-modelling"><i class="fa fa-check"></i><b>4.5</b> Bayesian modelling?</a></li>
<li class="chapter" data-level="4.6" data-path="analysis.html"><a href="analysis.html#drift-diffusion-modelling"><i class="fa fa-check"></i><b>4.6</b> Drift diffusion modelling</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html"><i class="fa fa-check"></i><b>5</b> Basic Visualisation Ideas</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#interaction-plots"><i class="fa fa-check"></i><b>5.1</b> Interaction Plots</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#base-r-option"><i class="fa fa-check"></i><b>5.1.1</b> Base R Option</a></li>
<li class="chapter" data-level="5.1.2" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#ggplot2-option"><i class="fa fa-check"></i><b>5.1.2</b> ggplot2 Option</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#barplots"><i class="fa fa-check"></i><b>5.2</b> Barplots</a></li>
<li class="chapter" data-level="5.3" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#density-plots"><i class="fa fa-check"></i><b>5.3</b> Density Plots</a></li>
<li class="chapter" data-level="5.4" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#combined-plots"><i class="fa fa-check"></i><b>5.4</b> Combined Plots</a></li>
<li class="chapter" data-level="5.5" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#plotting-mean-differences"><i class="fa fa-check"></i><b>5.5</b> Plotting mean differences</a></li>
<li class="chapter" data-level="5.6" data-path="basic-visualisation-ideas.html"><a href="basic-visualisation-ideas.html#final-notes-on-graphics"><i class="fa fa-check"></i><b>5.6</b> Final notes on graphics</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="specific-effects.html"><a href="specific-effects.html"><i class="fa fa-check"></i><b>6</b> Specific Effects</a>
<ul>
<li class="chapter" data-level="6.1" data-path="specific-effects.html"><a href="specific-effects.html#ces"><i class="fa fa-check"></i><b>6.1</b> CEs</a></li>
<li class="chapter" data-level="6.2" data-path="specific-effects.html"><a href="specific-effects.html#get-dat-as-dataframe-correctly"><i class="fa fa-check"></i><b>6.2</b> get dat as dataframe correctly</a></li>
<li class="chapter" data-level="6.3" data-path="specific-effects.html"><a href="specific-effects.html#step-1-prepare-dataframes-for-acc-and-rt"><i class="fa fa-check"></i><b>6.3</b> Step 1: prepare dataframes for ACC and RT</a></li>
<li class="chapter" data-level="6.4" data-path="specific-effects.html"><a href="specific-effects.html#step-2"><i class="fa fa-check"></i><b>6.4</b> Step 2</a></li>
<li class="chapter" data-level="6.5" data-path="specific-effects.html"><a href="specific-effects.html#step-3"><i class="fa fa-check"></i><b>6.5</b> Step 3</a></li>
<li class="chapter" data-level="6.6" data-path="specific-effects.html"><a href="specific-effects.html#cses"><i class="fa fa-check"></i><b>6.6</b> CSEs</a></li>
<li class="chapter" data-level="6.7" data-path="specific-effects.html"><a href="specific-effects.html#mixing-costs-und-switching-costs"><i class="fa fa-check"></i><b>6.7</b> Mixing Costs und Switching Costs</a></li>
<li class="chapter" data-level="6.8" data-path="specific-effects.html"><a href="specific-effects.html#task-switching"><i class="fa fa-check"></i><b>6.8</b> Task Switching</a></li>
<li class="chapter" data-level="6.9" data-path="specific-effects.html"><a href="specific-effects.html#post-error-slowing"><i class="fa fa-check"></i><b>6.9</b> Post-error Slowing</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Beginners Guide on How to Analyse Conflict Tasks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-preparation-ii" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data Preparation II<a href="data-preparation-ii.html#data-preparation-ii" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Now that we have a clean dataframe to work with, the next step is to carefully consider data exclusion before moving on to analysis. Which participants or trials to exclude depends largely on your specific research question (and your preregistration). Since data exclusion can be a sensitive issue, be sure that any decisions to exclude data are clearly motivated and well justified.</p>
<div id="exclusion-of-participants" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Exclusion of participants<a href="data-preparation-ii.html#exclusion-of-participants" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You’ll probably want to exclude participants who were non-compliant, often indicated by unusually high error rates. This can be done using a predefined cutoff (e.g., more than 20% errors) or relative to the group (e.g., 3 standard deviations from the mean. Here, you can adapt the z-score code shown in the next section). Just be sure to follow the criteria you set in your preregistration.</p>
</div>
<div id="exclusion-of-trials" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Exclusion of trials<a href="data-preparation-ii.html#exclusion-of-trials" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Depending on your research question, you may need to exclude specific types of trials (see Chapter 6 for details, REF). Always start by removing practice trials. If reaction time (RT) is your outcome measure, exclude all error trials. For sequential analyses like congruency sequence effects (CSEs), you also want to exclude trials following errors and the first trial of each block. When focusing on error analysis, excluding timeouts might be necessary.</p>
<p>The following example code shows how to subset the relevant trials and how to calculate the proportion of excluded trials relative to the total number of trials, which should be included in your report.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-preparation-ii.html#cb1-1" tabindex="-1"></a><span class="do">## Exclude any error trials</span></span>
<span id="cb1-2"><a href="data-preparation-ii.html#cb1-2" tabindex="-1"></a>dat4 <span class="ot">&lt;-</span> dat3[dat3<span class="sc">$</span>ACC <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb1-3"><a href="data-preparation-ii.html#cb1-3" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">nrow</span>(dat4)<span class="sc">/</span> <span class="fu">nrow</span>(dat3) <span class="co"># proportion of excluded trials</span></span>
<span id="cb1-4"><a href="data-preparation-ii.html#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="data-preparation-ii.html#cb1-5" tabindex="-1"></a><span class="do">## Exlude any trials after errors</span></span>
<span id="cb1-6"><a href="data-preparation-ii.html#cb1-6" tabindex="-1"></a>dat5 <span class="ot">&lt;-</span> dat4[dat4<span class="sc">$</span>ACC_N_1 <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb1-7"><a href="data-preparation-ii.html#cb1-7" tabindex="-1"></a><span class="co"># proportion of excluded trials (relative to all trials)</span></span>
<span id="cb1-8"><a href="data-preparation-ii.html#cb1-8" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">nrow</span>(dat5)<span class="sc">/</span> <span class="fu">nrow</span>(dat3) <span class="sc">-</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">nrow</span>(dat4)<span class="sc">/</span> <span class="fu">nrow</span>(dat3))</span></code></pre></div>
<div id="exclusion-of-outliers" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Exclusion of outliers<a href="data-preparation-ii.html#exclusion-of-outliers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Finally, when analyzing RTs, it is common practice to trim data or exclude outliers. The idea is to remove trials with unusually fast responses (e.g., under 100 ms, which might reflect reflexive key presses) or very slow ones (perhaps due to lapses in attention).However, note that the practice of outlier exclusion has faced criticism (e.g, <a href="https://doi.org/10.1037/xge0001450">Miller, 2023</a>).</p>
<p>In research on conflict taks, a popular method is to exclude trials with RTs that deviate more than ±3 standard deviations from the participant’s mean within each condition.</p>
<p>If you preregistered a z-score exclusion method, you can apply the following code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-preparation-ii.html#cb2-1" tabindex="-1"></a><span class="do">## 1) z-score trial exclusion, dplyr version</span></span>
<span id="cb2-2"><a href="data-preparation-ii.html#cb2-2" tabindex="-1"></a>datRT <span class="ot">&lt;-</span> dat3 <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="data-preparation-ii.html#cb2-3" tabindex="-1"></a>  <span class="co"># group by design cell</span></span>
<span id="cb2-4"><a href="data-preparation-ii.html#cb2-4" tabindex="-1"></a>  <span class="fu">group_by</span>(Subject, Congruency, Congruency_N_1) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="data-preparation-ii.html#cb2-5" tabindex="-1"></a>  <span class="co"># function scale computes z-Score</span></span>
<span id="cb2-6"><a href="data-preparation-ii.html#cb2-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zscore =</span> <span class="fu">scale</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="data-preparation-ii.html#cb2-7" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="data-preparation-ii.html#cb2-8" tabindex="-1"></a>  <span class="co"># we can set a criterium (e.g., greater than 2.5) for a new variable</span></span>
<span id="cb2-9"><a href="data-preparation-ii.html#cb2-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">abs</span>(zscore) <span class="sc">&lt;</span> <span class="fl">2.5</span>)</span>
<span id="cb2-10"><a href="data-preparation-ii.html#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="data-preparation-ii.html#cb2-11" tabindex="-1"></a><span class="do">## 1) z-score trial exclusion, Base R version</span></span>
<span id="cb2-12"><a href="data-preparation-ii.html#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="data-preparation-ii.html#cb2-13" tabindex="-1"></a><span class="co"># z-score per participant, Congruency, Congruency_N_1</span></span>
<span id="cb2-14"><a href="data-preparation-ii.html#cb2-14" tabindex="-1"></a>dat3<span class="sc">$</span>zscore <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-15"><a href="data-preparation-ii.html#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="data-preparation-ii.html#cb2-16" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(dat3<span class="sc">$</span>Subject)){</span>
<span id="cb2-17"><a href="data-preparation-ii.html#cb2-17" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">which</span>(dat3<span class="sc">$</span>Subject <span class="sc">==</span> i)</span>
<span id="cb2-18"><a href="data-preparation-ii.html#cb2-18" tabindex="-1"></a>  dat3<span class="sc">$</span>zscore[a] <span class="ot">&lt;-</span></span>
<span id="cb2-19"><a href="data-preparation-ii.html#cb2-19" tabindex="-1"></a>    <span class="fu">with</span>(dat3[a, ], <span class="fu">ave</span>(RT, Congruency, Congruency_N_1, <span class="at">FUN =</span> scale))</span>
<span id="cb2-20"><a href="data-preparation-ii.html#cb2-20" tabindex="-1"></a>}</span>
<span id="cb2-21"><a href="data-preparation-ii.html#cb2-21" tabindex="-1"></a></span>
<span id="cb2-22"><a href="data-preparation-ii.html#cb2-22" tabindex="-1"></a><span class="co"># create variable indicating trials which should be omitted</span></span>
<span id="cb2-23"><a href="data-preparation-ii.html#cb2-23" tabindex="-1"></a>dat3<span class="sc">$</span>excl <span class="ot">&lt;-</span> <span class="fu">abs</span>(dat3<span class="sc">$</span>zscore) <span class="sc">&lt;</span> <span class="fl">2.5</span></span>
<span id="cb2-24"><a href="data-preparation-ii.html#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="data-preparation-ii.html#cb2-25" tabindex="-1"></a><span class="co"># exclude trails and calculate percentage of trials excluded</span></span>
<span id="cb2-26"><a href="data-preparation-ii.html#cb2-26" tabindex="-1"></a>datRT <span class="ot">&lt;-</span> dat3[dat3<span class="sc">$</span>excl <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb2-27"><a href="data-preparation-ii.html#cb2-27" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">nrow</span>(datRT)<span class="sc">/</span> <span class="fu">nrow</span>(dat3)</span></code></pre></div>
<p>However, we recommend using the Tukey IQR method for outlier exclusion: trials with RTs that fall beyond ±1.5 times the interquartile range above or below the participant’s third quartile in the RT distribution are removed (Tukey, 1977). For an explanation, see this <a href="http://colingorrie.github.io/outlier-detection.html">blog</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-preparation-ii.html#cb3-1" tabindex="-1"></a><span class="do">## IQR method for outlier exclusion</span></span>
<span id="cb3-2"><a href="data-preparation-ii.html#cb3-2" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># must be loaded</span></span>
<span id="cb3-3"><a href="data-preparation-ii.html#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="data-preparation-ii.html#cb3-4" tabindex="-1"></a>datRT <span class="ot">&lt;-</span> dat3 <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="data-preparation-ii.html#cb3-5" tabindex="-1"></a>  <span class="co"># group by design cell</span></span>
<span id="cb3-6"><a href="data-preparation-ii.html#cb3-6" tabindex="-1"></a>  <span class="fu">group_by</span>(Subject, Congruency, Congruency_N_1) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="data-preparation-ii.html#cb3-7" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(RT)) <span class="sc">%&gt;%</span> <span class="co"># in case of NAs</span></span>
<span id="cb3-8"><a href="data-preparation-ii.html#cb3-8" tabindex="-1"></a>  <span class="co"># calculate IQR bounds</span></span>
<span id="cb3-9"><a href="data-preparation-ii.html#cb3-9" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-10"><a href="data-preparation-ii.html#cb3-10" tabindex="-1"></a>    <span class="at">IQR =</span> <span class="fu">quantile</span>(RT, <span class="fl">0.75</span>) <span class="sc">-</span> <span class="fu">quantile</span>(RT, <span class="fl">0.25</span>),</span>
<span id="cb3-11"><a href="data-preparation-ii.html#cb3-11" tabindex="-1"></a>    <span class="co"># mark valid trials (within bounds)</span></span>
<span id="cb3-12"><a href="data-preparation-ii.html#cb3-12" tabindex="-1"></a>    <span class="at">excl =</span> RT <span class="sc">&gt;=</span> <span class="fu">quantile</span>(RT, <span class="fl">0.25</span>) <span class="sc">-</span> <span class="fl">1.5</span> <span class="sc">*</span> IQR <span class="sc">&amp;</span> </span>
<span id="cb3-13"><a href="data-preparation-ii.html#cb3-13" tabindex="-1"></a>           RT <span class="sc">&lt;=</span> <span class="fu">quantile</span>(RT, <span class="fl">0.75</span>) <span class="sc">+</span> <span class="fl">1.5</span> <span class="sc">*</span> IQR) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="data-preparation-ii.html#cb3-14" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-15"><a href="data-preparation-ii.html#cb3-15" tabindex="-1"></a>  <span class="co"># keep only valid trials</span></span>
<span id="cb3-16"><a href="data-preparation-ii.html#cb3-16" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">as.logical</span>(excl) <span class="sc">==</span> <span class="cn">TRUE</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-preparation-i.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-Data_prep_2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
